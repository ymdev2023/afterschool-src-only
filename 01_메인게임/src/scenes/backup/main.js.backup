import k from "./kaboomContext.js";
import mainMenu from "./scenes/mainMenu.js";
<<<<<<< HEAD
import title from "./scenes/title.js";
import front from "./scenes/front.js";
=======
import prologue from "./scenes/prologue.js";
>>>>>>> 168311de5f598678acb6febbe3dee27fd4ff40bf
import schoolfront from "./scenes/schoolfront.js";
import schoolfirst from "./scenes/schoolfirst.js";
import schoolsecond from "./scenes/schoolsecond.js";
import intro from "./scenes/intro.js";
// import house from "./scenes/temp/house.js"; // ìˆ˜ì •ëœ ë¶€ë¶„: ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì£¼ì„ ì²˜ë¦¬
// import dungeon from "./scenes/temp/dungeon.js"; // ìˆ˜ì •ëœ ë¶€ë¶„: ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì£¼ì„ ì²˜ë¦¬
import credits from "./scenes/credits.js";
import tutorial from "./scenes/tutorial.js";

// í€˜ìŠ¤íŠ¸ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
import { initializeQuests } from "./systems/questDefinitions.js";
import { InventoryManager } from "./systems/inventoryManager.js";

k.loadFont("galmuri", "assets/fonts/galmuri.ttf"); // ìˆ˜ì •ëœ ë¶€ë¶„: fonts í´ë”ë¡œ ì´ë™
k.loadFont("gameboy", "assets/fonts/gb.ttf"); // ìˆ˜ì •ëœ ë¶€ë¶„: fonts í´ë”ë¡œ ì´ë™
k.loadFont("bitbit", "assets/fonts/bitbit.ttf"); // ìˆ˜ì •ëœ ë¶€ë¶„: fonts í´ë”ë¡œ ì´ë™
k.loadFont("stardust", "assets/fonts/stardust.ttf"); // ìˆ˜ì •ëœ ë¶€ë¶„: fonts í´ë”ë¡œ ì´ë™
k.loadFont("neodgm", "assets/fonts/neodgm.ttf"); // ìˆ˜ì •ëœ ë¶€ë¶„: fonts í´ë”ë¡œ ì´ë™
k.loadSound("rpg-front-bgm", "assets/sounds/rpg-front-bgm.mp3"); // ìˆ˜ì •ëœ ë¶€ë¶„: world-bgm â†’ rpg-front-bgm
k.loadSound("rpg-main-bgm", "assets/sounds/rpg-main-bgm.mp3"); // ìˆ˜ì •ëœ ë¶€ë¶„: main-bgm â†’ rpg-main-bgm
k.loadSound("rpg-first-bgm", "assets/sounds/rpg-first-bgm.mp3"); // ìˆ˜ì •ëœ ë¶€ë¶„: house-bgm â†’ rpg-first-bgm
k.loadSound("rpg-second-bgm", "assets/sounds/rpg-second-bgm.mp3"); // ìˆ˜ì •ëœ ë¶€ë¶„: dungeon-bgm â†’ rpg-second-bgm
k.loadSound("confirm-beep-sfx", "assets/sounds/confirmbeep-sfx.wav");
k.loadSound("boop-sfx", "assets/sounds/boop-sfx.wav");
k.loadSound("coin-sfx", "assets/sounds/coin-sfx.mp3");
k.loadSound("bubble-sfx", "assets/sounds/bubble-sfx.mp3");
k.loadSound("ghost-sfx", "assets/sounds/ghost-sfx.wav"); // ì¶”ê°€ëœ ë¶€ë¶„
k.loadSound("talk-sfx", "assets/sounds/talk-sfx.mp3"); // ì¶”ê°€ëœ ë¶€ë¶„: íƒ€ì´í•‘ íš¨ê³¼ìŒ
k.loadSound("text-sfx", "assets/sounds/text-sfx.wav"); // ì¶”ê°€ëœ ë¶€ë¶„: í…ìŠ¤íŠ¸ íš¨ê³¼ìŒ
k.loadSound("kick-sfx", "assets/sounds/kick-sfx.mp3"); // ì¶”ê°€ëœ ë¶€ë¶„: í‚¥ íš¨ê³¼ìŒ
k.loadSound("cat-sfx", "assets/sounds/cat-sfx.mp3"); // ì¶”ê°€ëœ ë¶€ë¶„: ê³ ì–‘ì´ íš¨ê³¼ìŒ

// íƒ€ì´í‹€ í™”ë©´ ì—ì…‹ ë¡œë“œ (ì‘ì€ ì´ë¯¸ì§€ë“¤ë§Œ)
k.loadSprite("title_bg", "assets/images/title_img.png");
// title.jsì—ì„œ ìˆœìˆ˜ JavaScript Canvasë¡œ ì²˜ë¦¬í•˜ë¯€ë¡œ í° ì´ë¯¸ì§€ë“¤ì€ ì œê±°
// k.loadSprite("title_layer1", "assets/images/titles/title_01_bg.png"); // 2563x1280 - ì œê±°
// k.loadSprite("title_layer2", "assets/images/titles/title_02_star.png"); // ì œê±°  
// k.loadSprite("title_layer3", "assets/images/titles/title_03_mini.png"); // ì œê±°
// k.loadSprite("title_layer4", "assets/images/titles/title_04_large.png"); // ì œê±°
// k.loadSprite("title_layer5", "assets/images/titles/title_05_characters.png"); // ì œê±°
// k.loadSprite("title_button_normal", "assets/images/titles/title_button_notpressed.png"); // ì œê±°
// k.loadSprite("title_button_pressed", "assets/images/titles/title_button_pressed.png"); // ì œê±°

// ì¶”ê°€ëœ ë¶€ë¶„: Animalese ë¬¸ìë³„ ì˜¤ë””ì˜¤ íŒŒì¼ë“¤ ë¡œë“œ
const animalese_letters = [
    "a",
    "b",
    "c",
    "d",
    "e",
    "f",
    "g",
    "h",
    "i",
    "j",
    "k",
    "l",
    "m",
    "n",
    "o",
    "p",
    "q",
    "r",
    "s",
    "t",
    "u",
    "v",
    "w",
    "x",
    "y",
    "z",
];

animalese_letters.forEach((letter) => {
    k.loadSound(`animalese-${letter}`, `assets/sounds/animalese/${letter}.wav`);
});

// Animalese digraphs ë¡œë“œ
const animalese_digraphs = ["ch", "sh", "ph", "th", "wh"];
animalese_digraphs.forEach((digraph) => {
    k.loadSound(
        `animalese-${digraph}`,
        `assets/sounds/animalese/${digraph}.wav`
    );
});

// Animalese íŠ¹ìˆ˜ë¬¸ììš© ì˜¤ë””ì˜¤
k.loadSound("animalese-bebebese", "assets/sounds/animalese/bebebese_slow.wav");

// ì¶”ê°€ëœ ë¶€ë¶„: ë§í’ì„  ìŠ¤í”„ë¼ì´íŠ¸ ë¡œë“œ (ì„ì‹œë¡œ ì œê±° - 404 ì—ëŸ¬ ë°©ì§€)
// k.loadSprite("speech-bubble", "assets/speech_bubble_animation-11x11.png");

// ì¶”ê°€ëœ ë¶€ë¶„: í€˜ìŠ¤íŠ¸ ëŠë‚Œí‘œ ìŠ¤í”„ë¼ì´íŠ¸ ë¡œë“œ
k.loadSprite("quest-exclamation", "assets/tiny_speech_indicators-11x11.png", {
    sliceX: 8, // ìˆ˜ì •ëœ ë¶€ë¶„: ê°€ë¡œë¡œ 8ê°œ í”„ë ˆì„
    sliceY: 1, // ìˆ˜ì •ëœ ë¶€ë¶„: ì„¸ë¡œë¡œ 1ì¤„
    // ê° í”„ë ˆì„ë³„ ê°ì • ìƒíƒœ ë§¤í•‘:
    // 0: í€˜ìŠ¤íŠ¸ ìˆëŠ” ìƒíƒœ
    // 1: ë§¤ìš° ë§Œì¡±í•œ ìƒíƒœ
    // 2: ê·¸ëƒ¥ ê·¸ëŸ° ìƒíƒœ
    // 3: ìŠ¬í”ˆìƒíƒœ
    // 4: í™”ë‚¨
    // 5: ì–¸ì§¢ìŒ
    // 6: ë§Œì¡±í•œ ìƒíƒœ
    // 7: ë¹ˆ ë§í’ì„ 
});
k.loadSprite(
    "speech-bubble-animation",
    "assets/speech_bubble_animation-11x11.png"
);
k.loadSprite(
    "tiny-speech-indicators",
    "assets/tiny_speech_indicators-11x11.png",
    {
        sliceX: 8, // ìˆ˜ì •ëœ ë¶€ë¶„: 8ê°œ í”„ë ˆì„ìœ¼ë¡œ ë‚˜ëˆ„ê¸°
        sliceY: 1, // 1ì¤„
    }
);

<<<<<<< HEAD
=======
// ì¸ë²¤í† ë¦¬ UI ìŠ¤í”„ë¼ì´íŠ¸ ë¡œë“œ
k.loadSprite("inventory-background", "assets/maps/inventory/Inventory_background.png");
k.loadSprite("inventory-bar", "assets/maps/inventory/Inventory_Bar.png");
k.loadSprite("inventory-slot", "assets/maps/inventory/Inventory_Slot.png");
k.loadSprite("inventory-select", "assets/maps/inventory/Inventory_select.png");

k.loadSprite("assets", "./assets/maps/temp/topdownasset.png", {
    // ìˆ˜ì •ëœ ë¶€ë¶„: temp í´ë”ë¡œ ì´ë™
    sliceX: 39,
    sliceY: 31,
    anims: {
        "player-idle-down": 952,
        "player-down": {
            from: 952,
            to: 955,
            loop: true,
        },
        "player-idle-side": 992,
        "player-side": {
            from: 992,
            to: 994,
            loop: true,
        },
        "player-idle-up": 1030,
        "player-up": {
            from: 1030,
            to: 1033,
            loop: true,
        },
        "player-attack-up": 1110,
        "player-attack-down": 1108,
        "player-attack-left": 1109,
        "player-attack-right": 1111,
        "slime-idle-down": 858,
        "slime-down": { from: 858, to: 859, loop: true },
        "slime-idle-side": 860,
        "slime-side": { from: 860, to: 861, loop: true },
        "slime-idle-up": 897,
        "slime-up": { from: 897, to: 898, loop: true },
        "oldman-down": 866,
        "oldman-side": 907,
        "oldman-up": 905,
        "ghost-down": { from: 862, to: 863, loop: true },
        note: 874,
    },
});
>>>>>>> 168311de5f598678acb6febbe3dee27fd4ff40bf


k.loadSprite("test-assets", "assets/images/rpg_0_spritesheet.png", {
    // ìˆ˜ì •ëœ ë¶€ë¶„: images í´ë”ë¡œ ì´ë™
    sliceX: 50,
    sliceY: 75,
    anims: {
        // ìƒˆ í”Œë ˆì´ì–´ ì• ë‹ˆë©”ì´ì…˜ (50x75 = 3750 ì´ í”„ë ˆì„, 0-3749 ì¸ë±ìŠ¤)
        "player-idle-down": 1015,
        "player-down": {
            from: 1015,
            to: 1018,
            loop: true,
            speed: 6, // ìˆ˜ì •ëœ ë¶€ë¶„: ì• ë‹ˆë©”ì´ì…˜ ì†ë„ ì¡°ì ˆ (ê¸°ë³¸ê°’ë³´ë‹¤ ëŠë¦¬ê²Œ)
        },
        // ì¶”ê°€ëœ ë¶€ë¶„: left/right ê°œë³„ ì• ë‹ˆë©”ì´ì…˜
        "player-idle-left": 1173,
        "player-left": {
            from: 1173,
            to: 1176,
            loop: true,
            speed: 6,
        },
        "player-idle-right": 1267,
        "player-right": {
            from: 1252,
            to: 1257,
            loop: true,
            speed: 6,
        },
        "player-idle-up": 1094,
        "player-up": {
            from: 1094,
            to: 1097,
            loop: true,
            speed: 6, // ìˆ˜ì •ëœ ë¶€ë¶„: ì• ë‹ˆë©”ì´ì…˜ ì†ë„ ì¡°ì ˆ
        },
        // sit ì• ë‹ˆë©”ì´ì…˜
        "player-sit-up": 1020,
        "player-sit-down": 1020,
        // ì¶”ê°€ëœ ë¶€ë¶„: left/right ê°œë³„ sit ì• ë‹ˆë©”ì´ì…˜
        "player-sit-left": 1494,
        "player-sit-right": 1495,

        student1: 728,
        student2: 976,
        student3: 1177,
        student4: 483,
        student5: 1125,
        student6: 434,
        student7: 375,
        student8: 927,

        // NPC ìºë¦­í„°ë“¤
        director: 435,
        cat: 479,
        facil: 436,

        // í¸ì§€ ì˜¤ë¸Œì íŠ¸ (50x75 ë²”ìœ„ ë‚´ ìƒˆë¡œìš´ ì¸ë±ìŠ¤)
        letter1: 1278,
        letter2: 1279,
        letter3: 1280,

        // ì¶”ê°€ëœ ë¶€ë¶„: mushroom ì˜¤ë¸Œì íŠ¸
        mushroom: 1282, // ìˆ˜ì •ëœ ë¶€ë¶„: mushroom ì¸ë±ìŠ¤ 1278 ì‚¬ìš©

        // ì¶”ê°€ëœ ë¶€ë¶„: ball (í”¼êµ¬ê³µ) ì˜¤ë¸Œì íŠ¸
        ball: 1283, // í”¼êµ¬ê³µ ìŠ¤í”„ë¼ì´íŠ¸ ì¸ë±ìŠ¤
    },
});

// front.jsonì„ ìœ„í•œ front-assets ìŠ¤í”„ë¼ì´íŠ¸ ë¡œë“œ
k.loadSprite("front-assets", "assets/images/rpg_spritesheet_front.png", {
    sliceX: 79, // front.jsonì˜ ì‹¤ì œ ì •ë³´: 1896/24 = 79ì—´
    sliceY: 79, // front.jsonì˜ ì‹¤ì œ ì •ë³´: 1896/24 = 79í–‰
    anims: {
        // ìƒˆ í”Œë ˆì´ì–´ ì• ë‹ˆë©”ì´ì…˜ (24x24 íƒ€ì¼ ì‹œìŠ¤í…œìš©)
        "player-idle-down": 1015,
        "player-down": {
            from: 1015,
            to: 1018,
            loop: true,
            speed: 6,
        },
        "player-idle-left": 1173,
        "player-left": {
            from: 1173,
            to: 1176,
            loop: true,
            speed: 6,
        },
        "player-idle-right": 1267,
        "player-right": {
            from: 1252,
            to: 1257,
            loop: true,
            speed: 6,
        },
        "player-idle-up": 1094,
        "player-up": {
            from: 1094,
            to: 1097,
            loop: true,
            speed: 6,
        },
        // sit ì• ë‹ˆë©”ì´ì…˜
        "player-sit-up": 1020,
        "player-sit-down": 1020,
        "player-sit-left": 1099,
        "player-sit-right": 1100,

        // NPCë“¤ë„ front-assetsì— ì¶”ê°€ (í•„ìš”í•œ ê²½ìš°)
        director: 435,
        cat: 479,
        
        // í¸ì§€ ì˜¤ë¸Œì íŠ¸
        letter1: 5299,
        letter2: 5300,
        letter3: 5301,
    },
});

// í•˜íŠ¸ ìŠ¤í”„ë¼ì´íŠ¸ ì¶”ê°€ (UIìš©)
k.loadSprite("full-heart", "assets/images/rpg_0_spritesheet.png", {
    sliceX: 50,
    sliceY: 75,
    anims: {
        "full-heart": 1300, // ì ì ˆí•œ ì¸ë±ìŠ¤ë¡œ ì¡°ì • í•„ìš”
    },
});

k.loadSprite("half-heart", "assets/images/rpg_0_spritesheet.png", {
    sliceX: 50,
    sliceY: 75,
    anims: {
        "half-heart": 1301, // ì ì ˆí•œ ì¸ë±ìŠ¤ë¡œ ì¡°ì • í•„ìš”
    },
});

k.loadSprite("empty-heart", "assets/images/rpg_0_spritesheet.png", {
    sliceX: 50,
    sliceY: 75,
    anims: {
        "empty-heart": 1302, // ì ì ˆí•œ ì¸ë±ìŠ¤ë¡œ ì¡°ì • í•„ìš”
    },
});



// // ì¶”ê°€ëœ ë¶€ë¶„: 16x32 í”Œë ˆì´ì–´ ìºë¦­í„° ìŠ¤í”„ë¼ì´íŠ¸ì‹œíŠ¸ (rpg_cha.png) - í™œì„±í™”
// k.loadSprite("player-tall", "assets/maps/rpg_cha.png", {
//     sliceX: 4, // 4í”„ë ˆì„ì”© (down 4ê°œ, up 4ê°œ, left 4ê°œ, right 4ê°œ)
//     sliceY: 4, // 4ë°©í–¥ (down, up, left, right ìˆœ)
//     anims: {
//         // Down ê±·ê¸° ì• ë‹ˆë©”ì´ì…˜ (ì²« ë²ˆì§¸ ì¤„)
//         "player-tall-idle-down": 0,
//         "player-tall-down": {
//             from: 0,
//             to: 3,
//             loop: true,
//             speed: 6,
//         },
//         // Up ê±·ê¸° ì• ë‹ˆë©”ì´ì…˜ (ë‘ ë²ˆì§¸ ì¤„)
//         "player-tall-idle-up": 4,
//         "player-tall-up": {
//             from: 4,
//             to: 7,
//             loop: true,
//             speed: 6,
//         },
//         // Left ê±·ê¸° ì• ë‹ˆë©”ì´ì…˜ (ì„¸ ë²ˆì§¸ ì¤„)
//         "player-tall-idle-left": 8,
//         "player-tall-left": {
//             from: 8,
//             to: 11,
//             loop: true,
//             speed: 6,
//         },
//         // Right ê±·ê¸° ì• ë‹ˆë©”ì´ì…˜ (ë„¤ ë²ˆì§¸ ì¤„)
//         "player-tall-idle-right": 12,
//         "player-tall-right": {
//             from: 12,
//             to: 15,
//             loop: true,
//             speed: 6,
//         },
//         // ì¶”ê°€ëœ ë¶€ë¶„: Sit ì• ë‹ˆë©”ì´ì…˜ (idle í”„ë ˆì„ ì‚¬ìš©)
//         "player-tall-sit-down": 0,
//         "player-tall-sit-up": 4,
//         "player-tall-sit-left": 8,
//         "player-tall-sit-right": 12,
//     },
// });

const scenes = {
    intro,
<<<<<<< HEAD
    front,
=======
    prologue,
>>>>>>> 168311de5f598678acb6febbe3dee27fd4ff40bf
    schoolfront,
    schoolfirst,
    schoolsecond,
    // house, // ìˆ˜ì •ëœ ë¶€ë¶„: ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì œê±°
    // dungeon, // ìˆ˜ì •ëœ ë¶€ë¶„: ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì œê±°
    mainMenu,
    title,
    credits,
    tutorial,
};

// í€˜ìŠ¤íŠ¸ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
console.log("ğŸ¯ í€˜ìŠ¤íŠ¸ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...");
initializeQuests();

// ì¸ë²¤í† ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
console.log("ğŸ“¦ ì¸ë²¤í† ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...");
const inventoryManager = new InventoryManager(k);
inventoryManager.initialize();

// ì „ì—­ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
k.inventoryManager = inventoryManager;

console.log("ğŸ“¦ ì¸ë²¤í† ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ. ì”¬ì—ì„œ UI ìƒì„± ì˜ˆì •");

for (const sceneName in scenes) {
    k.scene(sceneName, () => scenes[sceneName](k));
}

k.go("intro");
